# 계정 관리

## 계정 등록

사이드 패널에서 계정 정보를 입력하고 등록합니다.

### 필수 입력 항목

| 항목 | 설명 |
|------|------|
| 사용자 | 배틀넷 계정 이메일 |
| 비밀번호 | 배틀넷 계정 비밀번호 |
| 런처 | d2r.exe 또는 Launcher.exe 경로 |

### 선택 입력 항목

| 항목 | 설명 |
|------|------|
| 모드 | 사용할 모드(mod) 이름 |
| 설정파일 | 클라이언트별 Settings.json |
| 설명 | 창 제목에 표시할 텍스트 |

### 버튼

- **생성**: 새 계정 추가
- **갱신**: 선택된 계정 정보 수정
- **삭제**: 선택된 계정 삭제

## 인증 방식

### 명령줄 방식

가장 기본적인 인증 방식입니다.

```
d2r.exe -username abc@abc.net -password mypassword
```

!!! warning "제한사항"
    - 아시아(한국) 서버는 2023년 10월부터 **차단**됨
    - OTP(인증기) 사용 계정 **불가**

### 웹 토큰 방식

토큰을 발급받아 인증하는 방식입니다.

!!! success "장점"
    - 아시아 서버 접속 가능
    - OTP 사용 계정 지원
    - 한 번 발급 후 계속 사용 가능

### 배틀넷 런처 방식

배틀넷 런처를 스크립트로 제어하여 실행합니다.

!!! note "참고"
    웹 토큰 방식 구현 전 임시로 사용하던 방식입니다.
    동기화 문제가 발생할 수 있으므로 가능하면 다른 방식을 사용하세요.

## 토큰 발급

웹 토큰 방식 사용 시 토큰을 발급받아야 합니다.

### 자동 발급 (권장)

1. 사용자, 비밀번호 입력
2. 토큰 입력창 옆 **아이콘 클릭**
3. 프로그램이 자동으로 토큰 발급
4. OTP 사용 시 30초 이내 인증 필요

!!! tip "OTP 인증 시간"
    설정파일(d2r.ini)의 `token_otp_timeout = 30` 값으로 조정 가능

### 수동 발급

1. 크롬에서 **새 시크릿 창** 열기
2. 다음 주소 접속:
   ```
   https://us.battle.net/login/en/?externalChallenge=login&app=OSI
   ```
3. 로그인 후 에러 페이지에서 토큰 복사
4. 주소창에서 `ST=` 뒤의 값 복사
   ```
   http://localhost:0/?ST=US-xxxxx-xxxxxxxx&flowTrackingId=...
   ```
5. 프로그램의 토큰 입력창에 붙여넣기

!!! note "서버 지역 코드"
    토큰 앞의 US, KR, EU 등은 실제 접속 서버에 영향을 주지 않습니다.

### 토큰 저장

토큰 발급 후 반드시:

1. **갱신** 버튼 클릭
2. **파일 → 저장**으로 저장

## 특수문자 주의사항

사용자 아이디나 비밀번호에 다음 문자가 포함되면 명령줄 실행이 안 될 수 있습니다:

- 콤마 (`,`)
- 세미콜론 (`;`)
- 등호 (`=`)
- 공백문자 (스페이스, 탭 등)

이런 경우 **웹 토큰 방식**을 사용하세요.

## 계정 정보 파일

### 저장 위치

- 기본: 실행 파일과 같은 폴더의 `default.dat`
- 사용자 지정 가능

### 암호화

- 계정 정보는 AES 암호화되어 저장됨
- 암호화 키가 다르면 파일을 읽을 수 없음

### 백업

중요한 계정 정보이므로 `default.dat` 파일을 정기적으로 백업하세요.
